<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chervilla 2026 – RSVP</title>
<link rel="icon" type="image/png" href="favicon.png">
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    body {
        margin: 0;
        padding: 0;
        background: #4c936f;
        font-family: system-ui, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        color: #0F3A3A;
        text-align: center;
        position: relative;
    }

    #main {
        display: flex;
        flex-direction: column;
        align-items: center;
        z-index: 1;
    }

    img.logo {
        width: clamp(220px, 60vw, 480px);
        max-height: 50vh;
        object-fit: contain;
        margin-bottom: 8px;
    }

    #dates {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 16px;
    }

    #status {
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 28px;
    }

    .buttons {
        display: flex;
        gap: 20px;
        margin-top: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
        justify-content: center;
    }

    .buttons a {
        text-decoration: none;
        padding: 14px 24px;
        background: #F0C04A;
        color: #0F3A3A;
        border-radius: 6px;
        font-size: 1.1rem;
        font-weight: 600;
        border: 2px solid #0F3A3A;
        min-width: 160px;
        text-align: center;
        transition: background 0.2s;
    }

    .buttons a:hover {
        background: #ffd978;
    }

    @media (max-width: 600px) {
        .buttons { flex-direction: column; }
    }

    /* Confetti */
    @keyframes fall {
        to { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }

    /* Dust shimmer */
    #dustLayer {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;
        overflow: hidden;
    }

    .dust {
        position: absolute;
        width: 3px;
        height: 3px;
        border-radius: 50%;
        background: rgba(255,230,150,0.9);
        box-shadow: 0 0 6px rgba(255,230,150,0.8);
        opacity: 0;
        animation: dustMove ease-in-out infinite;
    }

    @keyframes dustMove {
        0%   { opacity: 0; transform: translateY(0) scale(0.6); }
        20%  { opacity: 1; }
        60%  { opacity: 0.9; transform: translateY(-35px) scale(1); }
        100% { opacity: 0; transform: translateY(-70px) scale(0.7); }
    }

    /* Curtains */
    .curtain {
        position: fixed;
        top: 0;
        bottom: 0;
        width: 50vw;
        background: #0b2618;
        z-index: 5;
        pointer-events: none;
    }

    #curtainLeft {
        left: 0;
        animation: curtainLeft 4s ease-in-out forwards;
    }

    #curtainRight {
        right: 0;
        animation: curtainRight 4s ease-in-out forwards;
    }

    @keyframes curtainLeft {
        0%   { transform: translateX(0); }
        100% { transform: translateX(-100%); }
    }

    @keyframes curtainRight {
        0%   { transform: translateX(0); }
        100% { transform: translateX(100%); }
    }
</style>
</head>
<body>

<div id="dustLayer"></div>

<div id="main">
    <img src="logo.png" alt="Chervilla 2026 Logo" class="logo">
    <div id="dates">11 - 18 July</div>
    <div id="status">RSVP is now open!</div>
    <div class="buttons">
        <a href="info/chervilla-2026-20251214.pdf">Information</a>
        <a href="https://forms.gle/bJjDungBCQQSg5Fb9">RSVP</a>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const firstTime = !localStorage.getItem("chervilla_seen");

    if (firstTime) {
        localStorage.setItem("chervilla_seen", "true");
        createCurtains();
        runConfetti().then(startDustShimmer);
    } else {
        startDustShimmer();
    }
});

/* Curtains */
function createCurtains() {
    const left = document.createElement("div");
    left.id = "curtainLeft";
    left.className = "curtain";

    const right = document.createElement("div");
    right.id = "curtainRight";
    right.className = "curtain";

    document.body.appendChild(left);
    document.body.appendChild(right);

    setTimeout(() => {
        left.remove();
        right.remove();
    }, 4200);
}

/* Confetti */
function runConfetti() {
    return new Promise(resolve => {
        const durationMs = 5000;
        const endTime = Date.now() + durationMs;

        const interval = setInterval(() => {
            for (let i = 0; i < 3; i++) spawnConfetti();
            if (Date.now() > endTime) {
                clearInterval(interval);
                setTimeout(resolve, 1500);
            }
        }, 60);
    });
}

function spawnConfetti() {
    const c = document.createElement("div");
    c.style.position = "fixed";
    c.style.top = "-10px";
    c.style.left = Math.random()*100 + "vw";
    c.style.width = "8px";
    c.style.height = "8px";
    c.style.background = `hsl(${Math.random()*360},80%,60%)`;
    c.style.opacity = 0.9;
    c.style.borderRadius = "2px";
    c.style.pointerEvents = "none";
    c.style.transform = `rotate(${Math.random()*360}deg)`;

    const duration = 1 + Math.random()*2;
    c.style.animation = `fall ${duration}s linear forwards`;

    document.body.appendChild(c);
    setTimeout(() => c.remove(), 4000);
}

/* Dust shimmer – always runs */
function startDustShimmer() {
    const layer = document.getElementById("dustLayer");
    const count = 40;

    for (let i = 0; i < count; i++) {
        const d = document.createElement("div");
        d.className = "dust";

        const x = Math.random()*100;
        const y = 40 + Math.random()*40;
        const duration = 4 + Math.random()*4;
        const delay = Math.random()*6;

        d.style.left = x + "vw";
        d.style.top = y + "vh";
        d.style.animationDuration = duration + "s";
        d.style.animationDelay = delay + "s";

        layer.appendChild(d);
    }
}
</script>

</body>
</html>
